create_and_execute_cypher_query:
  description: >
    1. Analyze user query: {query}
    2. Consult the graph schema (provided in your goal or use the schema tool if needed).
    3. Formulate the optimal Cypher query to answer the query and prepare the input 'query' and 'parameters' arguments for the 'Neo4j Execute Cypher Query Tool'.
    4. Execute the query using the 'Neo4j Execute Cypher Query Tool' and return the raw results or error message.
  expected_output: >
    A list of dictionaries representing the query results or a dictionary containing an 'error' key.
  
  agent: data_engineer

# execute_query_task:
#   description: >
#     Use 'Neo4j Tool' to execute the query against the knowledge graph and 
#     output the results (list of dictionaries) or the error dictionary is returned by the tool.
  
#   expected_output: >
#     A list of dictionaries representing the query results or a dictionary containing an 'error' key.
  
#   agent: data_engineer


analyze_retrieved_data:
  description: >
    Review the original user query: {question}
    * Examine the data retrieved (or error message) from the previous task.
    * If data exists, analyze it:
      - Identify key microbes, metabolites, pathways mentioned or relevant.
      - Describe the relationships found (production, consumption, cross-feeding, pathway involvement).
      - Quantify findings using flux, abundance, or scores where available.
      - Discuss potential biological implications or answer the specific question asked.
    * If an error occurred or no data was found, clearly state this.
    * Provide a detailed textual analysis.
  expected_output: >
    A comprehensive textual analysis of the query results in the context of the user query, 
    or a statement indicating missing data or errors.
  agent: content_analyst

write_report:
  description: >
    * Take the textual analysis from the previous task.
    * Synthesize the key findings into a concise and well-structured final report.
    * Ensure the report directly addresses the original user query.
    * Format the report clearly (e.g., using markdown).
  expected_output: >
    A final, formatted report summarizing the analysis and answering the user query.
    Formatted as markdown without '```'
  agent: report_writer
